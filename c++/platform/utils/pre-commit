#!/bin/bash

LOCAL_BRANCH="$(git rev-parse --abbrev-ref HEAD)"

if [[ "$LOCAL_BRANCH" == "luxoft_r_4_r" || "$LOCAL_BRANCH" == "work-sxr" ]]; then

    FILE=${GIT_DIR}/../sources/daimler-artemis/send-x-receive/src/version.h

    echo '/*** This file is generated by pre-commit hook ***/' > ${FILE}
    echo '' >> ${FILE}
    echo -n 'static char const rcsid[] = "$Name: send-x-receive v.' >> ${FILE} 
    date +%m.%d.%H | tr -d '\n' >> ${FILE} 
    echo ' $";' >> ${FILE}
    git add ${FILE}
    echo 'Updated version.h'
fi

exit 0
