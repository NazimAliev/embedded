### Исходные данные

#### Функционал администратора системы

* авторизация в системе (регистрация не нужна)
* добавление/изменение/удаление опросов. Атрибуты опроса: название, дата старта, дата окончания, описание. После создания поле дата старта" у опроса менять нельзя
* добавление/изменение/удаление вопросов в опросе. Атрибуты вопросов: текст вопроса, тип вопроса (ответ текстом, ответ с выбором одного варианта, ответ с выбором нескольких вариантов)

#### Функционал пользователей системы

* получение списка активных опросов
* прохождение опроса: опросы можно проходить анонимно, в качестве идентификатора пользователя в API передаётся числовой ID, по которому сохраняются ответы пользователя на вопросы; один пользователь может участвовать в любом количестве опросов
* получение пройденных пользователем опросов с детализацией по ответам (что выбрано) по ID уникальному пользователя

Использовать следующие технологии: Django 2.2.10, Django REST framework.

#### Результат выполнения задачи

* исходный код приложения в github (только на github, публичный репозиторий)
* инструкция по разворачиванию приложения (в docker или локально)
* документация по API

### Объектная модель приложения

Модель Polls предоставляет интерфейс к опросам, которые имеют свои атрибуты. На модель Polls ссылается модель Questions, которая содержит атрибуты вопроса и в поле question_type содержит тип вопроса: ожидающий ответ текстом, выбор одного или нескольких вариантов из списка.

Пункты вопроса которые подразумевают выбор содержатся в модели Choices, которая ссылается на Questions. В свою очередь, есть модели ответов AnswerText, AnswerOne и AnswerChoice.

AnswerText содержит текст ответа на вопрос, подразумевающий один ответ, и ссылается на Question.
AnswerOne и AnswerChoice содержат ссылку на Choice, которая определяет какой ответ был выбран.

В моделях Answer* сохраняется информация о ссылочной иерархии, т.е. они однозначно определяют Question и Poller:
AnswerText -> Questions -> Polls
AnswerChoice -> Choices -> Questions -> Polls
AnswerOne -> Choices -> Questions -> Polls

Данные моделей Pollsr, Questions, Choices заполняются администратором. Эти данные доступны по API.
Данные моделей Answer* заполняются пользователем через API. Для тестовых целей они также отображены в панели администратора.

*ToDo: ввести ограничение по ссылкам в зависимости от типа вопроса*

### API

"Запросы" передаются пользователем методом GET.

```api/polls/```
>Возвращается список всех опросов
---

```api/polls/poll_id=XXX```
>Для опроса poll_id возвращается перечень вопросов и к каждому вопросу варианты ответа
---

```api/answers/poll_id=XXX/user_id=XXX```
>Возвращаются все ответы пользователя user_id для опроса poll_id
---

"Ответы пользователя" передаются методом POST с данными в теле запроса, Content-type: application/json.

```
api/answer_text/
Body:
{
  "answer":
  {
    "user_id": 1,
    "question_id": 1,
    "answer_text": "yes"
  }
}
```
>Постит ответ answer_text на вопрос question_id от имени пользователя user_id
---

```
api/answer_one/
Body:
{
  "answer":
  {
    "user_id": 1,
    "choice_id": 1
  }
}
```
>Постит единственно возможный вариант ответа choice_id от имени пользователя user_id
---

```
api/answer_choice/
Body:
{
  "answer":
  {
    "user_id": 1,
    "choice_id": 1
  }
}
```
>Постит один из множественных вариантов ответа answer_choice от имени пользователя user_id
---


*ToDo: проверка единственности и множественности ответов*
*ToDo: сравнивать дату ответов пользователя со сроком действия опроса*

Примеры запросов:
```
GET /api/answers/poll_id%3D2/user_id%3D1
HTTP 200 OK
Allow: GET, HEAD, OPTIONS
Content-Type: application/json
Vary: Accept

{
    "answers": [
        {
            "question": 2,
            "question_text": "Ваш любимый фрукт?",
            "question_type": 0,
            "choice_name": []
        },
        {
            "question": 3,
            "question_text": "Найдите красный фрукт",
            "question_type": 1,
            "choice_name": [
                "Яблоко: 4",
                "Слива: 5",
                "Апельсин: 6"
            ]
        },
        {
            "choice": 4
        },
        [],
        {
            "choice": 5
        },
        [],
        {
            "choice": 6
        },
        [],
        {
            "question": 4,
            "question_text": "Что растет на деревьях",
            "question_type": 2,
            "choice_name": [
                "Помидор: 7",
                "Груша: 8",
                "Топинамбур: 9",
                "Арбуз: 10"
            ]
        },
        {
            "choice": 7
        },
        [],
        {
            "choice": 8
        },
        [],
        {
            "choice": 9
        },
        [],
        {
            "choice": 10
        },
        []
    ]
}


GET /api/polls/poll_id%3D2
HTTP 200 OK
Allow: GET, HEAD, OPTIONS
Content-Type: application/json
Vary: Accept

{
    "poll": [
        {
            "question": 2,
            "question_text": "Ваш любимый фрукт?",
            "question_type": 0,
            "choice_name": []
        },
        {
            "question": 3,
            "question_text": "Найдите красный фрукт",
            "question_type": 1,
            "choice_name": [
                "Яблоко: 4",
                "Слива: 5",
                "Апельсин: 6"
            ]
        },
        {
            "question": 4,
            "question_text": "Что растет на деревьях",
            "question_type": 2,
            "choice_name": [
                "Помидор: 7",
                "Груша: 8",
                "Топинамбур: 9",
                "Арбуз: 10"
            ]
```
